<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><title>尝试配置一下简单的webpack? | CHUYUXUAN</title><meta name="author" content="chuyuxuan"><meta name="copyright" content="chuyuxuan"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="ffffff"><meta name="description" content="准备1.需要安装node.js，当前教学版本为v12.22.12 2.一个IDE，这里使用vs code ，当前版本为v1.70.2。 初始化一个项目在一个位置，我们新建一个文件夹，并且进入该文件夹。 12mkdir webpack_studycd webpack_study  初始化一个node项目。 1npm init -y  此时，在该目录下会有一个package.json文件 12.└──">
<meta property="og:type" content="article">
<meta property="og:title" content="尝试配置一下简单的webpack?">
<meta property="og:url" content="https://blog.chuyuxuan.top/2022/10/09/%E5%B0%9D%E8%AF%95%E9%85%8D%E7%BD%AE%E4%B8%80%E4%B8%8B%E7%AE%80%E5%8D%95%E7%9A%84webpack/index.html">
<meta property="og:site_name" content="CHUYUXUAN">
<meta property="og:description" content="准备1.需要安装node.js，当前教学版本为v12.22.12 2.一个IDE，这里使用vs code ，当前版本为v1.70.2。 初始化一个项目在一个位置，我们新建一个文件夹，并且进入该文件夹。 12mkdir webpack_studycd webpack_study  初始化一个node项目。 1npm init -y  此时，在该目录下会有一个package.json文件 12.└──">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://s2.loli.net/2022/10/09/rvQuakSAYZ2b9Wg.png">
<meta property="article:published_time" content="2022-10-09T13:50:31.000Z">
<meta property="article:modified_time" content="2023-08-01T14:03:23.995Z">
<meta property="article:author" content="chuyuxuan">
<meta property="article:tag" content="webpack">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://s2.loli.net/2022/10/09/rvQuakSAYZ2b9Wg.png"><link rel="shortcut icon" href="/img/favicon1.ico"><link rel="canonical" href="https://blog.chuyuxuan.top/2022/10/09/%E5%B0%9D%E8%AF%95%E9%85%8D%E7%BD%AE%E4%B8%80%E4%B8%8B%E7%AE%80%E5%8D%95%E7%9A%84webpack/index.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//hm.baidu.com"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox/fancybox.min.css" media="print" onload="this.media='all'"><script>var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "https://hm.baidu.com/hm.js?66e8bfee2641f792cfb4b22b2cf76e0e";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script><script>const GLOBAL_CONFIG = {
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  translate: undefined,
  noticeOutdate: {"limitDay":500,"position":"top","messagePrev":"It has been","messageNext":"days since the last update, the content of the article may be outdated."},
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  dateSuffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: undefined,
  source: {
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: true,
  },
  autoDarkmode: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: '尝试配置一下简单的webpack?',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2023-08-01 22:03:23'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
    win.getCSS = (url,id = false) => new Promise((resolve, reject) => {
      const link = document.createElement('link')
      link.rel = 'stylesheet'
      link.href = url
      if (id) link.id = id
      link.onerror = reject
      link.onload = link.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        link.onload = link.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(link)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', 'ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          if (t === 'dark') activateDarkMode()
          else if (t === 'light') activateLightMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const detectApple = () => {
      if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
    })(window)</script><meta name="generator" content="Hexo 6.3.0"></head><body><div id="web_bg"></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="/img/avatar1.jpg" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">60</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">72</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">0</div></a></div><hr class="custom-hr"/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 主页</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-address-book"></i><span> 关于</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 归档</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> Link</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header"><nav id="nav"><span id="blog-info"><a href="/" title="CHUYUXUAN"></a></span><div id="menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 主页</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-address-book"></i><span> 关于</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 归档</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> Link</span></a></div></div><div id="toggle-menu"><a class="site-page" href="javascript:void(0);"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">尝试配置一下简单的webpack?</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2022-10-09T13:50:31.000Z" title="发表于 2022-10-09 21:50:31">2022-10-09</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2023-08-01T14:03:23.995Z" title="更新于 2023-08-01 22:03:23">2023-08-01</time></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title="尝试配置一下简单的webpack?"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">阅读量:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><link rel="stylesheet" type="text&#x2F;css" href="https://cdn.jsdelivr.net/npm/hexo-tag-hint@0.3.1/dist/hexo-tag-hint.min.css"><h3 id="准备"><a href="#准备" class="headerlink" title="准备"></a>准备</h3><p>1.需要安装<code>node.js</code>，当前教学版本为<code>v12.22.12</code></p>
<p>2.一个IDE，这里使用<code>vs code</code> ，当前版本为<code>v1.70.2</code>。</p>
<h3 id="初始化一个项目"><a href="#初始化一个项目" class="headerlink" title="初始化一个项目"></a>初始化一个项目</h3><p>在一个位置，我们新建一个文件夹，并且进入该文件夹。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mkdir webpack_study</span><br><span class="line">cd webpack_study</span><br></pre></td></tr></table></figure>

<p>初始化一个node项目。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm init -y</span><br></pre></td></tr></table></figure>

<p>此时，在该目录下会有一个package.json文件</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">.</span><br><span class="line">└── package.json</span><br></pre></td></tr></table></figure>

<p>我们在根目录创建三个文件<code>index.html</code>,<code>index.js</code>,<code>outside.js</code>。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">.</span><br><span class="line">├── index.html</span><br><span class="line">├── index.js</span><br><span class="line">├── outside.js</span><br><span class="line">└── package.json</span><br></pre></td></tr></table></figure>

<p><code>index.html</code>内容如下：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;zh&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>index<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span></span><br><span class="line">      </span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 引入两个js文件 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;./outside.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;./index.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><code>index.js</code>内容如下：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">updateDom (<span class="string">&#x27;app&#x27;</span>,<span class="string">&#x27;我是主页&#x27;</span>)</span><br></pre></td></tr></table></figure>

<p>outside.js内容如下：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title function_">updateDom</span> = (<span class="params">id, content</span>) =&gt; &#123;</span><br><span class="line">    <span class="keyword">let</span> div = <span class="variable language_">window</span>.<span class="property">document</span>.<span class="title function_">getElementById</span>(id);</span><br><span class="line">    div.<span class="property">innerText</span> = content</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>我们打开这个<code>index.html</code>。</p>
<img src="https://s2.loli.net/2022/09/02/7m5lnEBC3Yr4WhV.png" style="zoom:50%;" />



<h3 id="思考问题"><a href="#思考问题" class="headerlink" title="思考问题"></a>思考问题</h3><p>让我们思考几个问题。</p>
<p>如果在<code>index.html</code>中调换 <code>index.html</code> 和 <code>outside.html</code> ，看看效果如何？</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;zh&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>index<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 引入两个js文件 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;./index.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;./outside.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>



<img src="https://s2.loli.net/2022/09/02/uPfNJaqbVe8jdrp.png" style="zoom:50%;" />

<p>可见，如果不小心调换js的引用顺序，则会造成引用的函数没有先声明就使用了。</p>
<p>在本例子中，虽然文件只有两个，但是如果我们文件特别多，比如30个，50个，100个等等，那么就会存在一些声明重复，变量重复等等，这样会导致项目变得越来越臃肿，变得难以维护起来。所以，我们提出了一个新思路：<code>模块化打包</code>。</p>
<p>因此，<code>webpack</code>应运而生。</p>
<h3 id="安装webpack"><a href="#安装webpack" class="headerlink" title="安装webpack"></a>安装webpack</h3><p>在文件根目录下，我们执行安装命令：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i webpack webpack-cli -D</span><br></pre></td></tr></table></figure>

<p>-D 是开发依赖</p>
<p>安装完成后，执行一下命令查看是否有输出：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npx webpack -v</span><br></pre></td></tr></table></figure>

<p>可以看到输入如下：</p>
<img src="https://s2.loli.net/2022/09/02/i73YrwGDcutUokR.png" style="zoom:50%;" />

<blockquote>
<p><code>npx</code>是npm5.2之后提供的新功能。可以通过npx -v来检测它的版本。 在这里，我们通过它来调用项目安装的模块，它在运行时会在node_modules&#x2F;.bin中去检查命令是否存在。<code>webpack-dev-server</code>我们稍后再讲。</p>
</blockquote>
<h3 id="模块化代码"><a href="#模块化代码" class="headerlink" title="模块化代码"></a>模块化代码</h3><p>在把代码按照模块分割改动之前，我们先复原<code>index.html</code>中的引用顺序，接着开始模块分割。即在<code>outside.js</code>导出，<code>在index.js</code>导入。下面我们来改造一下代码。这里使用<code>commonjs规范</code>。如果你还不太了解，可以<a target="_blank" rel="noopener" href="https://juejin.cn/post/6920773247948554248">点击这里</a>去阅读学习。</p>
<p><code>outside.js</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title function_">updateDom</span> = (<span class="params">id, content</span>) =&gt; &#123;</span><br><span class="line">    <span class="keyword">let</span> div = <span class="variable language_">window</span>.<span class="property">document</span>.<span class="title function_">getElementById</span>(id);</span><br><span class="line">    div.<span class="property">innerText</span> = content</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">  <span class="variable language_">module</span>.<span class="property">exports</span>=&#123;</span><br><span class="line">    updateDom</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br></pre></td></tr></table></figure>



<p><code>index.js</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> &#123;updateDom&#125;=<span class="built_in">require</span>(<span class="string">&#x27;./outside&#x27;</span>)</span><br><span class="line"></span><br><span class="line">updateDom (<span class="string">&#x27;app&#x27;</span>,<span class="string">&#x27;我是主页&#x27;</span>)</span><br><span class="line"></span><br></pre></td></tr></table></figure>





<p>现在，我们来打开浏览器看一下：</p>
<img src="https://s2.loli.net/2022/09/02/tmITA7syq6CiunK.png" style="zoom:50%;" />

<p>报错了，模块没有定义。因为<code>require</code>这种模块化的处理方式是无法在浏览器中运行的。这时，<code>webpack</code>就派上用场了。</p>
<h3 id="对index-js打包"><a href="#对index-js打包" class="headerlink" title="对index.js打包"></a>对index.js打包</h3><p>我们在终端输入：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npx webpack </span><br></pre></td></tr></table></figure>

<blockquote>
<p>为了以后打包方便，我们可以在<code>package.json</code>配置好对应的启动脚本。可参考「<a target="_blank" rel="noopener" href="https://blog.csdn.net/qq_41967129/article/details/123250362">这里</a>」</p>
</blockquote>
<p>输出的结果如下图所示。</p>
<img src="https://s2.loli.net/2022/09/02/PoIXJUNZdvlVrmt.png" style="zoom: 33%;" />



<p>我们查看当前的文件目录，如上图<code>标注2</code>所示，你会发现多了一个<code>dist</code>文件夹，里面有<code>main.js</code>的一个js文件。</p>
<p>打开<code>main.js</code>看一下，发现代码已经压缩了：</p>
<img src="https://s2.loli.net/2022/09/02/LUCVAIrg7MHe2pK.png" style="zoom: 33%;" />



<p>我们把压缩后的<code>main.js</code>引入到<code>index.html</code>中，然后在浏览器中打开看看。</p>
<p>浏览器不再报错，页面正常加载。</p>
<img src="https://s2.loli.net/2022/09/02/zGpTPr3M7akedNB.png" style="zoom: 33%;" />



<p>从最后的结果可看出，<code>webpack</code>会分析入口文件中的引用关系，把相关的文件合成在一起，变成一个.js文件。</p>
<p>好啦，到了这里，我们已经开始入门了，接下来让我们深入了解一下<code>webpack</code>。</p>
<h3 id="webpack概念"><a href="#webpack概念" class="headerlink" title="webpack概念"></a>webpack概念</h3><p>webpack的核心概念如下所示，官网解释为</p>
<figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">webpack 是一个用于现代 JavaScript 应用程序的 静态模块打包工具。当 webpack 处理应用程序时，它会在内部从一个或多个入口点构建一个 依赖图(dependency graph)，然后将你项目中所需的每一个模块组合成一个或多个 bundles，它们均为静态资源，用于展示你的内容。</span><br></pre></td></tr></table></figure>



<p>这里我们现在不用全部着急着去理解所有的内容，一切先从实践中开始。当然，你可以点击对应的链接去官方文档阅读。不妨我们先从配置文件入手吧。</p>
<blockquote>
<ul>
<li><a target="_blank" rel="noopener" href="https://webpack.docschina.org/concepts/#mode">模式(mode)</a></li>
</ul>
<ul>
<li><a target="_blank" rel="noopener" href="https://webpack.docschina.org/concepts/#entry">入口(entry)</a></li>
<li><a target="_blank" rel="noopener" href="https://webpack.docschina.org/concepts/#output">输出(output)</a></li>
<li><a target="_blank" rel="noopener" href="https://webpack.docschina.org/concepts/#loaders">loader</a></li>
<li><a target="_blank" rel="noopener" href="https://webpack.docschina.org/concepts/#plugins">插件(plugin)</a></li>
<li><a target="_blank" rel="noopener" href="https://webpack.docschina.org/concepts/#browser-compatibility">浏览器兼容性(browser compatibility)</a></li>
<li><a target="_blank" rel="noopener" href="https://webpack.docschina.org/concepts/#environment">环境(environment)</a></li>
</ul>
</blockquote>
<h3 id="1-模式-mode"><a href="#1-模式-mode" class="headerlink" title="1.模式(mode)"></a>1.<a target="_blank" rel="noopener" href="https://webpack.docschina.org/concepts/#mode">模式(mode)</a></h3><p>像所有的软件一样，webpack也有自己的默认配置目录，这个配置文件就是<code>webpack.config.js</code>。</p>
<p>我们先在项目根目录下创建一个名为<strong>webpack.config.js</strong>。其内容如下：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span>=&#123;</span><br><span class="line">  <span class="attr">mode</span>: <span class="string">&#x27;development&#x27;</span>,<span class="comment">//打包方式</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>这个文件的意义是导出一个配置项：用来对webpack的打包行为做设置。在操作层面，就是学习如何去使用这个文件。</p>
<p>上面的代码中，配置了打包方式，现在试着再打包一下，看看<code>main.js</code>有什么变化。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> * ATTENTION: The &quot;eval&quot; devtool has been used (maybe by default in mode: &quot;development&quot;).</span></span><br><span class="line"><span class="comment"> * This devtool is neither made for production nor for readable output files.</span></span><br><span class="line"><span class="comment"> * It uses &quot;eval()&quot; calls to create a separate source file in the browser devtools.</span></span><br><span class="line"><span class="comment"> * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)</span></span><br><span class="line"><span class="comment"> * or disable the default devtool with &quot;devtool: false&quot;.</span></span><br><span class="line"><span class="comment"> * If you are looking for production-ready output files, see mode: &quot;production&quot; (https://webpack.js.org/configuration/mode/).</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="comment">/******/</span> (<span class="function">() =&gt;</span> &#123; <span class="comment">// webpackBootstrap</span></span><br><span class="line"><span class="comment">/******/</span> 	<span class="keyword">var</span> __webpack_modules__ = (&#123;</span><br><span class="line"></span><br><span class="line"><span class="comment">/***/</span> <span class="string">&quot;./index.js&quot;</span>:</span><br><span class="line"><span class="comment">/*!******************!*\</span></span><br><span class="line"><span class="comment">  !*** ./index.js ***!</span></span><br><span class="line"><span class="comment">  \******************/</span></span><br><span class="line"><span class="comment">/***/</span> (<span class="function">(<span class="params">__unused_webpack_module, __unused_webpack_exports, __webpack_require__</span>) =&gt;</span> &#123;</span><br><span class="line"></span><br><span class="line"><span class="built_in">eval</span>(<span class="string">&quot;const &#123;updateDom&#125;=__webpack_require__(/*! ./outside */ \&quot;./outside.js\&quot;)\n\nupdateDom (&#x27;app&#x27;,&#x27;我是主页&#x27;)\n\n\n//# sourceURL=webpack://webpack_study/./index.js?&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">/***/</span> &#125;),</span><br><span class="line"></span><br><span class="line"><span class="comment">/***/</span> <span class="string">&quot;./outside.js&quot;</span>:</span><br><span class="line"><span class="comment">/*!********************!*\</span></span><br><span class="line"><span class="comment">  !*** ./outside.js ***!</span></span><br><span class="line"><span class="comment">  \********************/</span></span><br><span class="line"><span class="comment">/***/</span> (<span class="function">(<span class="params"><span class="variable language_">module</span></span>) =&gt;</span> &#123;</span><br><span class="line"></span><br><span class="line"><span class="built_in">eval</span>(<span class="string">&quot;const updateDom = (id, content) =&gt; &#123;\n    let div = window.document.getElementById(id);\n    div.innerText = content\n&#125;;\n\n  module.exports=&#123;\n    updateDom\n  &#125;\n  \n\n//# sourceURL=webpack://webpack_study/./outside.js?&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">/***/</span> &#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">/******/</span> 	&#125;);</span><br><span class="line"><span class="comment">/************************************************************************/</span></span><br><span class="line"><span class="comment">/******/</span> 	<span class="comment">// The module cache</span></span><br><span class="line"><span class="comment">/******/</span> 	<span class="keyword">var</span> __webpack_module_cache__ = &#123;&#125;;</span><br><span class="line"><span class="comment">/******/</span> 	</span><br><span class="line"><span class="comment">/******/</span> 	<span class="comment">// The require function</span></span><br><span class="line"><span class="comment">/******/</span> 	<span class="keyword">function</span> <span class="title function_">__webpack_require__</span>(<span class="params">moduleId</span>) &#123;</span><br><span class="line"><span class="comment">/******/</span> 		<span class="comment">// Check if module is in cache</span></span><br><span class="line"><span class="comment">/******/</span> 		<span class="keyword">var</span> cachedModule = __webpack_module_cache__[moduleId];</span><br><span class="line"><span class="comment">/******/</span> 		<span class="keyword">if</span> (cachedModule !== <span class="literal">undefined</span>) &#123;</span><br><span class="line"><span class="comment">/******/</span> 			<span class="keyword">return</span> cachedModule.<span class="property">exports</span>;</span><br><span class="line"><span class="comment">/******/</span> 		&#125;</span><br><span class="line"><span class="comment">/******/</span> 		<span class="comment">// Create a new module (and put it into the cache)</span></span><br><span class="line"><span class="comment">/******/</span> 		<span class="keyword">var</span> <span class="variable language_">module</span> = __webpack_module_cache__[moduleId] = &#123;</span><br><span class="line"><span class="comment">/******/</span> 			<span class="comment">// no module.id needed</span></span><br><span class="line"><span class="comment">/******/</span> 			<span class="comment">// no module.loaded needed</span></span><br><span class="line"><span class="comment">/******/</span> 			<span class="attr">exports</span>: &#123;&#125;</span><br><span class="line"><span class="comment">/******/</span> 		&#125;;</span><br><span class="line"><span class="comment">/******/</span> 	</span><br><span class="line"><span class="comment">/******/</span> 		<span class="comment">// Execute the module function</span></span><br><span class="line"><span class="comment">/******/</span> 		__webpack_modules__[moduleId](<span class="variable language_">module</span>, <span class="variable language_">module</span>.<span class="property">exports</span>, __webpack_require__);</span><br><span class="line"><span class="comment">/******/</span> 	</span><br><span class="line"><span class="comment">/******/</span> 		<span class="comment">// Return the exports of the module</span></span><br><span class="line"><span class="comment">/******/</span> 		<span class="keyword">return</span> <span class="variable language_">module</span>.<span class="property">exports</span>;</span><br><span class="line"><span class="comment">/******/</span> 	&#125;</span><br><span class="line"><span class="comment">/******/</span> 	</span><br><span class="line"><span class="comment">/************************************************************************/</span></span><br><span class="line"><span class="comment">/******/</span> 	</span><br><span class="line"><span class="comment">/******/</span> 	<span class="comment">// startup</span></span><br><span class="line"><span class="comment">/******/</span> 	<span class="comment">// Load entry module and return exports</span></span><br><span class="line"><span class="comment">/******/</span> 	<span class="comment">// This entry module can&#x27;t be inlined because the eval devtool is used.</span></span><br><span class="line"><span class="comment">/******/</span> 	<span class="keyword">var</span> __webpack_exports__ = <span class="title function_">__webpack_require__</span>(<span class="string">&quot;./index.js&quot;</span>);</span><br><span class="line"><span class="comment">/******/</span> 	</span><br><span class="line"><span class="comment">/******/</span> &#125;)()</span><br><span class="line">;</span><br></pre></td></tr></table></figure>

<p>明显可以看到，<code>main.js</code>比之前多出了很多内容，我们能够清晰的看到打包之前到源码。没错，这个是开发模式，不妨现在把<strong>mode</strong>调整成<code>production</code>,再看看<code>main.js</code>。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">(()=&gt;&#123;var e=&#123;810:e=&gt;&#123;e.exports=&#123;updateDom:(e,t)=&gt;&#123;window.document.getElementById(e).innerText=t&#125;&#125;&#125;&#125;,t=&#123;&#125;;function r(o)&#123;var n=t[o];if(void 0!==n)return n.exports;var p=t[o]=&#123;exports:&#123;&#125;&#125;;return e[o](p,p.exports,r),p.exports&#125;(()=&gt;&#123;const&#123;updateDom:e&#125;=r(810);e(&quot;app&quot;,&quot;我是主页&quot;)&#125;)()&#125;)();</span><br></pre></td></tr></table></figure>

<p>很明显，<code>main.js</code>变得简洁起来，去掉了提示，同时也压缩了一些不必要的换行，加入了一定的混淆变量。</p>
<p>我们再换成**<code>none</code>**试试:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/******/</span> (<span class="function">() =&gt;</span> &#123; <span class="comment">// webpackBootstrap</span></span><br><span class="line"><span class="comment">/******/</span> 	<span class="keyword">var</span> __webpack_modules__ = ([</span><br><span class="line"><span class="comment">/* 0 */</span>,</span><br><span class="line"><span class="comment">/* 1 */</span></span><br><span class="line"><span class="comment">/***/</span> (<span class="function">(<span class="params"><span class="variable language_">module</span></span>) =&gt;</span> &#123;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">updateDom</span> = (<span class="params">id, content</span>) =&gt; &#123;</span><br><span class="line">    <span class="keyword">let</span> div = <span class="variable language_">window</span>.<span class="property">document</span>.<span class="title function_">getElementById</span>(id);</span><br><span class="line">    div.<span class="property">innerText</span> = content</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">  <span class="variable language_">module</span>.<span class="property">exports</span>=&#123;</span><br><span class="line">    updateDom</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line"></span><br><span class="line"><span class="comment">/***/</span> &#125;)</span><br><span class="line"><span class="comment">/******/</span> 	]);</span><br><span class="line"><span class="comment">/************************************************************************/</span></span><br><span class="line"><span class="comment">/******/</span> 	<span class="comment">// The module cache</span></span><br><span class="line"><span class="comment">/******/</span> 	<span class="keyword">var</span> __webpack_module_cache__ = &#123;&#125;;</span><br><span class="line"><span class="comment">/******/</span> 	</span><br><span class="line"><span class="comment">/******/</span> 	<span class="comment">// The require function</span></span><br><span class="line"><span class="comment">/******/</span> 	<span class="keyword">function</span> <span class="title function_">__webpack_require__</span>(<span class="params">moduleId</span>) &#123;</span><br><span class="line"><span class="comment">/******/</span> 		<span class="comment">// Check if module is in cache</span></span><br><span class="line"><span class="comment">/******/</span> 		<span class="keyword">var</span> cachedModule = __webpack_module_cache__[moduleId];</span><br><span class="line"><span class="comment">/******/</span> 		<span class="keyword">if</span> (cachedModule !== <span class="literal">undefined</span>) &#123;</span><br><span class="line"><span class="comment">/******/</span> 			<span class="keyword">return</span> cachedModule.<span class="property">exports</span>;</span><br><span class="line"><span class="comment">/******/</span> 		&#125;</span><br><span class="line"><span class="comment">/******/</span> 		<span class="comment">// Create a new module (and put it into the cache)</span></span><br><span class="line"><span class="comment">/******/</span> 		<span class="keyword">var</span> <span class="variable language_">module</span> = __webpack_module_cache__[moduleId] = &#123;</span><br><span class="line"><span class="comment">/******/</span> 			<span class="comment">// no module.id needed</span></span><br><span class="line"><span class="comment">/******/</span> 			<span class="comment">// no module.loaded needed</span></span><br><span class="line"><span class="comment">/******/</span> 			<span class="attr">exports</span>: &#123;&#125;</span><br><span class="line"><span class="comment">/******/</span> 		&#125;;</span><br><span class="line"><span class="comment">/******/</span> 	</span><br><span class="line"><span class="comment">/******/</span> 		<span class="comment">// Execute the module function</span></span><br><span class="line"><span class="comment">/******/</span> 		__webpack_modules__[moduleId](<span class="variable language_">module</span>, <span class="variable language_">module</span>.<span class="property">exports</span>, __webpack_require__);</span><br><span class="line"><span class="comment">/******/</span> 	</span><br><span class="line"><span class="comment">/******/</span> 		<span class="comment">// Return the exports of the module</span></span><br><span class="line"><span class="comment">/******/</span> 		<span class="keyword">return</span> <span class="variable language_">module</span>.<span class="property">exports</span>;</span><br><span class="line"><span class="comment">/******/</span> 	&#125;</span><br><span class="line"><span class="comment">/******/</span> 	</span><br><span class="line"><span class="comment">/************************************************************************/</span></span><br><span class="line"><span class="keyword">var</span> __webpack_exports__ = &#123;&#125;;</span><br><span class="line"><span class="comment">// This entry need to be wrapped in an IIFE because it need to be isolated against other modules in the chunk.</span></span><br><span class="line">(<span class="function">() =&gt;</span> &#123;</span><br><span class="line"><span class="keyword">const</span> &#123;updateDom&#125;=<span class="title function_">__webpack_require__</span>(<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line">updateDom (<span class="string">&#x27;app&#x27;</span>,<span class="string">&#x27;我是主页&#x27;</span>)</span><br><span class="line"></span><br><span class="line">&#125;)();</span><br><span class="line"></span><br><span class="line"><span class="comment">/******/</span> &#125;)()</span><br><span class="line">;</span><br></pre></td></tr></table></figure>

<p>看来，<code>webpack</code>并没有把文件给压缩起来，他只是把两个文件放在了一起，没有像<code>development</code>那样详细。</p>
<p>好啦，到这里，我们搞清楚了<code>webpack</code>中的一个配置点<strong>mode</strong>，它有以下属性值：</p>
<ul>
<li>production.  &lt;– 默认值</li>
<li>none.</li>
<li>development.</li>
</ul>
<h3 id="2-入口-entry"><a href="#2-入口-entry" class="headerlink" title="2.入口(entry)"></a>2.<a target="_blank" rel="noopener" href="https://webpack.docschina.org/concepts/#entry">入口(entry)</a></h3><p>在webpack中，默认的入口和出口分别是：</p>
<ul>
<li>默认入口是：<code>./src/index.js</code></li>
<li>默认输出是：<code>./dist/main.js</code></li>
</ul>
<p>也就是说，如果直接在根目录下运行<code>webpack</code>，它会直接去找<code>.src</code>下的<code>index.js</code>，并把打包之后的代码放在<code>dist/main.js</code>下。没有<code>dist</code>目录则会生成<code>dist</code>目录。</p>
<p>我们在根目录新建一个<strong>src</strong>文件夹，并且把<code>index.js</code>，<code>outside.js</code>移动到它目录中：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">src</span><br><span class="line">├── index.js</span><br><span class="line">└── outside.js</span><br></pre></td></tr></table></figure>

<p>在配置文件<code>webpack.config.js</code>我们先不给它一个入口，保持默认：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span>=&#123;</span><br><span class="line">    <span class="attr">mode</span>: <span class="string">&#x27;development&#x27;</span>,</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>

<p>运行<code>npx webpack</code>打包一下看看。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"> npx webpack       </span><br><span class="line">asset main.js 2.65 KiB [emitted] (name: main)</span><br><span class="line">./src/index.js 73 bytes [built] [code generated]</span><br><span class="line">./src/outside.js 158 bytes [built] [code generated]</span><br><span class="line">webpack 5.74.0 compiled successfully in 85 ms</span><br></pre></td></tr></table></figure>

<p>看来还是可以成功打包的。</p>
<p>但是，在实际的项目中，这种直接在默认目录的情况比较少。例如，<code>js</code>全部都放在一个文件夹里，<code>css</code>也是如此。</p>
<p>在<code>src</code>目录下，我们新建一个<code>js</code>文件夹，把两个js文件丢进去，并且把<code>index.js</code>改名为<code>main.js</code>：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">src</span><br><span class="line">└── js</span><br><span class="line">    ├── main.js</span><br><span class="line">    └── outside.js</span><br></pre></td></tr></table></figure>

<p>接着，在<code>webpack.config.js</code>的配置项中添加<code>entry</code>项。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">  <span class="attr">mode</span>: <span class="string">&#x27;development&#x27;</span>, </span><br><span class="line">  <span class="attr">entry</span>: <span class="string">&#x27;./src/js/main.js&#x27;</span> <span class="comment">//入口文件</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>重新打包试试看?🤓。</p>
<p>当然，<code>entry</code>可以配置多个文件多个入口等，不过此笔记不做展开，等你读完这篇入门笔记之后，你可以去挑对应官方文档章节去阅读。</p>
<h3 id="3-输出-output"><a href="#3-输出-output" class="headerlink" title="3.输出(output)"></a>3.<a target="_blank" rel="noopener" href="https://webpack.docschina.org/concepts/#output">输出(output)</a></h3><p>我们在<code>webpack.config.js</code>中设置<code>output</code>项:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">  <span class="attr">mode</span>: <span class="string">&#x27;development&#x27;</span>, </span><br><span class="line">  <span class="attr">entry</span>: <span class="string">&#x27;./src/js/main.js&#x27;</span>,</span><br><span class="line">  <span class="attr">output</span>: &#123;</span><br><span class="line">    <span class="attr">filename</span>: <span class="string">&#x27;bundle.js&#x27;</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>此配置将一个单独的 <code>bundle.js</code> 文件输出到 <code>dist</code> 目录中。</p>
<p>运行看看？</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">main</span><br><span class="line">├── bundle.js</span><br><span class="line">└── main.js   // 这个是webpack默认的配置</span><br></pre></td></tr></table></figure>

<p>现在，我们制定一个输出位置：把出口文件设置为在build目录下的bundle.js。为此，<code>webpack</code>就得这样配置：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//引入nodejs中的核心模块</span></span><br><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">&#x27;path&#x27;</span>)</span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">  <span class="attr">mode</span>: <span class="string">&#x27;development&#x27;</span>, </span><br><span class="line">  <span class="attr">entry</span>: <span class="string">&#x27;./src/js/main.js&#x27;</span>,</span><br><span class="line">  <span class="attr">output</span>: &#123;</span><br><span class="line">    <span class="attr">path</span>: path.<span class="title function_">join</span>(__dirname, <span class="string">&#x27;/build&#x27;</span>), <span class="comment">// 决定出口文件在哪里</span></span><br><span class="line">    <span class="attr">filename</span>: <span class="string">&#x27;bundle.js&#x27;</span> <span class="comment">// 设置出口文件的名字。默认情况下，它叫main.js</span></span><br><span class="line">  &#125;,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>运行看看？</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">build</span><br><span class="line">└── bundle.js</span><br></pre></td></tr></table></figure>

<p>看来已经有啦。这里对路径说明一下，<code>output</code>中的<code>path</code>用来指定打包后的路径。注意：它必须是<code>绝对路径</code>。所以，这里引用<strong>path</strong>模块中的<strong>join和__dirname</strong>来生成绝对路径。</p>
<p>如果path中的路径不存在，它会自动创建。</p>
<h3 id="4-loader"><a href="#4-loader" class="headerlink" title="4.loader"></a>4.<a target="_blank" rel="noopener" href="https://webpack.docschina.org/concepts/#loaders">loader</a></h3><p>在<code>webpack</code>看来 一切皆模块，图片，样式文件，js文件。 但是webpack默认只能处理js模块，对于非js的内容，例如css, less文件，图片文件等等，它就需要一些帮手来处理了。这些帮手就是<code>loader</code>。webpack 可以使用 loader 来预处理文件。这允许你打包除 JavaScript 之外的任何静态资源。你可以使用 <code>Node.js</code> 来很简单地编写自己的 loader。</p>
<p>例如，用<code>css-loader</code>来处理css引入的问题。</p>
<h5 id="css-loader"><a href="#css-loader" class="headerlink" title="css-loader"></a>css-loader</h5><p>在src文件下，创建src&#x2F;css&#x2F;public.css 文件。</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">body</span>,<span class="selector-tag">html</span>&#123;</span><br><span class="line">  <span class="attribute">padding</span>:<span class="number">0</span>;</span><br><span class="line">  <span class="attribute">font-size</span>:<span class="number">14px</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p>在src文件下，创建src&#x2F;css&#x2F;style.css 文件。</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">@import</span> <span class="string">&quot;public.css&quot;</span>;</span><br><span class="line"><span class="selector-tag">div</span> &#123;</span><br><span class="line">  <span class="attribute">border</span>: <span class="number">4px</span> solid <span class="number">#ccc</span>;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">50%</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">200px</span>;</span><br><span class="line">  <span class="attribute">margin</span>: <span class="number">30px</span> auto;</span><br><span class="line">  <span class="attribute">box-shadow</span>: -<span class="number">9px</span> <span class="number">9px</span> <span class="number">7px</span> <span class="number">0px</span> <span class="number">#ccc</span>;</span><br><span class="line">  <span class="attribute">background-color</span>: <span class="number">#f387d8</span>;</span><br><span class="line">  <span class="attribute">text-align</span>: center;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>css的<code>@import</code>语句用来导入另一个css文件。</p>
</blockquote>
<p>最后，在src&#x2F;js&#x2F;main.js中导入css</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> &#123;updateDom&#125;=<span class="built_in">require</span>(<span class="string">&#x27;./outside&#x27;</span>)</span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;../css/style.css&quot;</span></span><br><span class="line">updateDom (<span class="string">&#x27;app&#x27;</span>,<span class="string">&#x27;我是主页&#x27;</span>)</span><br></pre></td></tr></table></figure>



<p>假如，我们没有加css-loader，我们打包看看，结果会得到如下报错：</p>
<p><img src="https://s2.loli.net/2022/09/06/7iNhyqRB5c4WfxP.png" alt="image-20220906105028891"></p>
<p>上面报错的原因是:webpack把<code>.css</code>文件内容当作了js代码来运行，那当然会报错了。所以，解决方法是安装相应的<code>loader</code>来处理。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i css-loader -D </span><br></pre></td></tr></table></figure>



<p>修改<code>webpack.config.js</code>文件，添加<code>module</code>。语法如下所示：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">//引入nodejs中的核心模块</span><br><span class="line">const path = require(&#x27;path&#x27;)</span><br><span class="line">module.exports = &#123;</span><br><span class="line">  mode: &#x27;development&#x27;, </span><br><span class="line">  entry: &#x27;./src/js/main.js&#x27;,</span><br><span class="line">  output: &#123;</span><br><span class="line">    path: path.join(__dirname, &#x27;/build&#x27;), // 决定出口文件在哪里</span><br><span class="line">    filename: &#x27;bundle.js&#x27; // 设置出口文件的名字。默认情况下，它叫main.js</span><br><span class="line">  &#125;,</span><br><span class="line">  module: &#123; // 处理非js模块</span><br><span class="line">    rules: [ // 规则</span><br><span class="line">        &#123;</span><br><span class="line">          test: /\.css$/, // 正则测试</span><br><span class="line">          use: [&#x27;css-loader&#x27;] // loader</span><br><span class="line">        &#125; </span><br><span class="line">      ] </span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>更改一下html中引入的js代码。</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;zh&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>index<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 引入新的bundle.js文件 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;./build/bundle.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>运行一下，它不会报错。但是，页面上也并没有出现样式的效果。打包之后的文件中并没有包含css代码。</p>
<img src="https://s2.loli.net/2022/09/07/TA6N9OGnVYiqFoR.png" style="zoom:25%;" />







<p><code>css</code>样式生效会有两种条件，通过<code>&lt;link&gt;</code>和<code>&lt;style&gt;</code>标签引用，而<code>css-loader</code>只是能让你在.js中通过import来引入<code>.css</code>，如果你希望引入的css代码最终以style标签的方式插入到html页面中，则还需要安装一个<code>style-loader</code>。</p>
<h5 id="style-loader"><a href="#style-loader" class="headerlink" title="style-loader"></a>style-loader</h5><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i style-loader -D</span><br></pre></td></tr></table></figure>

<p>安装好后，修改配置<code>webpack.config.js</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//引入nodejs中的核心模块</span></span><br><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">&#x27;path&#x27;</span>)</span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">  <span class="attr">mode</span>: <span class="string">&#x27;development&#x27;</span>, </span><br><span class="line">  <span class="attr">entry</span>: <span class="string">&#x27;./src/js/main.js&#x27;</span>,</span><br><span class="line">  <span class="attr">output</span>: &#123;</span><br><span class="line">    <span class="attr">path</span>: path.<span class="title function_">join</span>(__dirname, <span class="string">&#x27;/build&#x27;</span>), <span class="comment">// 决定出口文件在哪里</span></span><br><span class="line">    <span class="attr">filename</span>: <span class="string">&#x27;bundle.js&#x27;</span> <span class="comment">// 设置出口文件的名字。默认情况下，它叫main.js</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">module</span>: &#123; <span class="comment">// 处理非js模块</span></span><br><span class="line">    <span class="attr">rules</span>: [ <span class="comment">// 规则</span></span><br><span class="line">        &#123;</span><br><span class="line">          <span class="attr">test</span>: <span class="regexp">/\.css$/</span>, <span class="comment">// 正则测试</span></span><br><span class="line">          <span class="attr">use</span>: [<span class="string">&#x27;style-loader&#x27;</span>,<span class="string">&#x27;css-loader&#x27;</span>] <span class="comment">// loader</span></span><br><span class="line">        &#125; </span><br><span class="line">      ] </span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<blockquote>
<p>在有多个loader的情况下，use数组中的loader执行顺序是<strong>从右到左</strong>的过程。即：</p>
<ul>
<li>先用css-loader来处理css</li>
<li>再用style-loader把css代码插入到html中的style标签中。</li>
</ul>
</blockquote>
<p>打包好之后，我们来看一下效果：</p>
<img src="https://s2.loli.net/2022/09/08/u3jKABRE1hUTmPn.png" alt="image-20220908204634463" style="zoom: 25%;" />

<p>如图，css已经生效了。</p>
<h5 id="Less-loader"><a href="#Less-loader" class="headerlink" title="Less-loader"></a>Less-loader</h5><p>假如，我们有<code>less</code>文件在项目中，如果需要解析，我们需要安装<code>less-loader</code>。</p>
<p>我们在<strong>src</strong>目录的<strong>less</strong>目录下创建 index.less。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">src</span><br><span class="line">└── less</span><br><span class="line">    └── index.less</span><br></pre></td></tr></table></figure>

<p>内容如下：</p>
<figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">@import</span> <span class="string">&quot;../css/style.css&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">body</span>&#123;</span><br><span class="line">  <span class="selector-tag">div</span> &#123;</span><br><span class="line">    <span class="attribute">color</span>: <span class="built_in">rgb</span>(<span class="number">255</span>, <span class="number">255</span>, <span class="number">255</span>);  <span class="comment">// 改变字体颜色</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>因为我们直接把css给引入了，所以就在<strong>src&#x2F;js&#x2F;main.js</strong>中引入<strong>index.less</strong></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> &#123;updateDom&#125;=<span class="built_in">require</span>(<span class="string">&#x27;./outside&#x27;</span>)</span><br><span class="line"><span class="comment">// import &quot;../css/style.css&quot;</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;../less/index.less&#x27;</span></span><br><span class="line">updateDom (<span class="string">&#x27;app&#x27;</span>,<span class="string">&#x27;我是主页&#x27;</span>)</span><br></pre></td></tr></table></figure>

<p>接着，我们引入<code>less-loader</code></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i less less-loader -D</span><br></pre></td></tr></table></figure>

<p>安装好后，在<code>webpack.config.js</code>配置中添加对应的loader。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//引入nodejs中的核心模块</span></span><br><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">&#x27;path&#x27;</span>)</span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">  <span class="attr">mode</span>: <span class="string">&#x27;development&#x27;</span>, </span><br><span class="line">  <span class="attr">entry</span>: <span class="string">&#x27;./src/js/main.js&#x27;</span>,</span><br><span class="line">  <span class="attr">output</span>: &#123;</span><br><span class="line">    <span class="attr">path</span>: path.<span class="title function_">join</span>(__dirname, <span class="string">&#x27;/build&#x27;</span>), <span class="comment">// 决定出口文件在哪里</span></span><br><span class="line">    <span class="attr">filename</span>: <span class="string">&#x27;bundle.js&#x27;</span> <span class="comment">// 设置出口文件的名字。默认情况下，它叫main.js</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">module</span>: &#123; <span class="comment">// 处理非js模块</span></span><br><span class="line">    <span class="attr">rules</span>: [ <span class="comment">// 规则</span></span><br><span class="line">        &#123;</span><br><span class="line">          <span class="attr">test</span>: <span class="regexp">/\.css$/</span>, <span class="comment">// 正则测试</span></span><br><span class="line">          <span class="attr">use</span>: [<span class="string">&#x27;style-loader&#x27;</span>,<span class="string">&#x27;css-loader&#x27;</span>] <span class="comment">// loader</span></span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">          <span class="attr">test</span>: <span class="regexp">/\.less$/</span>, <span class="comment">// 正则测试</span></span><br><span class="line">          <span class="attr">use</span>: [<span class="string">&#x27;style-loader&#x27;</span>, <span class="string">&#x27;css-loader&#x27;</span>, <span class="string">&#x27;less-loader&#x27;</span>] <span class="comment">// loader</span></span><br><span class="line">        &#125;</span><br><span class="line">      ] </span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>在配置中，对于less文件的处理涉及三个loader，其处理顺序是less-loader &#x3D;&gt; css-loader &#x3D;&gt; style-loader。</p>
<p><strong>less-loader</strong>:用来加载less文件，并处理成css<br><strong>css-loader</strong>：用来加载css文件<br><strong>style-loader</strong>:用来将css代码以style标签的格式插入到html文件中</p>
</blockquote>
<p>好了，现在我们打个包，试一下效果如何。</p>
<img src="https://s2.loli.net/2022/10/09/tSbdARuIHOheExB.png" alt="image-20220913175301558" style="zoom:33%;" />





<p>less-loader生效了。</p>
<h5 id="url-loader（可跳过）"><a href="#url-loader（可跳过）" class="headerlink" title="url-loader（可跳过）"></a>url-loader（可跳过）</h5><p>我们处理完成了css，js，但是还差一个，文件。这里以图片为例，说明一下在 <code>webpack</code> 中图片的处理方法。</p>
<p>在<code>src</code>文件下创建一个<code>img</code>文件夹，并且引入一张图片：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">src</span><br><span class="line">├── css</span><br><span class="line">│   ├── public.css</span><br><span class="line">│   └── style.css</span><br><span class="line">├── img</span><br><span class="line">│   └── dog.jpg        &lt;-----------------引入的图片</span><br><span class="line">├── js</span><br><span class="line">│   ├── main.js</span><br><span class="line">│   └── outside.js</span><br><span class="line">└── less</span><br><span class="line">    └── index.less</span><br></pre></td></tr></table></figure>

<p>接着，在<code>less/index.less</code>中引入该图片。</p>
<figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">@import</span> <span class="string">&quot;../css/style.css&quot;</span>;</span><br><span class="line"><span class="selector-tag">body</span>&#123;</span><br><span class="line">  <span class="selector-tag">div</span> &#123;</span><br><span class="line">    <span class="attribute">color</span>: <span class="number">#ffffff</span>;</span><br><span class="line">    <span class="attribute">text-shadow</span>: <span class="number">1px</span> <span class="number">1px</span> <span class="number">2px</span> black;</span><br><span class="line">    <span class="attribute">background</span>: url(<span class="string">&#x27;../img/dog.jpg&#x27;</span>);</span><br><span class="line">    <span class="attribute">background-size</span>: cover;</span><br><span class="line">    <span class="attribute">background-repeat</span>: no-repeat;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>执行一下打包，我们可以看到，在设置好的输出目录下有图片了。</p>
<img src="https://s2.loli.net/2022/09/14/aCAuxMHSEnpPDsR.png" style="zoom:33%;" />



<p>假如我们想对该图片进行优化，例如压缩，重命名等等，我们可以引入<code>url-loader</code>或<code>file-loader</code>.</p>
<p>在当前文件根目录下执行：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i url-loader file-loader -D</span><br></pre></td></tr></table></figure>

<p>在<code>webpack.config.js</code>配置文件中设置如下：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//引入nodejs中的核心模块</span></span><br><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">&#x27;path&#x27;</span>)</span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">  <span class="attr">mode</span>: <span class="string">&#x27;development&#x27;</span>,</span><br><span class="line">  <span class="attr">entry</span>: <span class="string">&#x27;./src/js/main.js&#x27;</span>,</span><br><span class="line">  <span class="attr">output</span>: &#123;</span><br><span class="line">    <span class="attr">path</span>: path.<span class="title function_">join</span>(__dirname, <span class="string">&#x27;/build&#x27;</span>), <span class="comment">// 决定出口文件在哪里</span></span><br><span class="line">    <span class="attr">filename</span>: <span class="string">&#x27;bundle.js&#x27;</span> <span class="comment">// 设置出口文件的名字。默认情况下，它叫main.js</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">module</span>: &#123; <span class="comment">// 处理非js模块</span></span><br><span class="line">    <span class="attr">rules</span>: [ <span class="comment">// 规则</span></span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">test</span>: <span class="regexp">/\.css$/</span>, <span class="comment">// 正则测试</span></span><br><span class="line">        <span class="attr">use</span>: [<span class="string">&#x27;style-loader&#x27;</span>, <span class="string">&#x27;css-loader&#x27;</span>] <span class="comment">// loader</span></span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">test</span>: <span class="regexp">/\.less$/</span>, <span class="comment">// 正则测试</span></span><br><span class="line">        <span class="attr">use</span>: [<span class="string">&#x27;style-loader&#x27;</span>, <span class="string">&#x27;css-loader&#x27;</span>, <span class="string">&#x27;less-loader&#x27;</span>] <span class="comment">// loader</span></span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">test</span>:<span class="regexp">/\.(png|jpe?g|gif|svg)$/</span>,</span><br><span class="line">        <span class="attr">use</span>:[</span><br><span class="line">          &#123;</span><br><span class="line">            <span class="attr">loader</span>:<span class="string">&#x27;url-loader&#x27;</span>,</span><br><span class="line">            <span class="attr">options</span>:&#123;</span><br><span class="line">              <span class="attr">name</span>:<span class="string">&quot;img/[name].[hash:6].[ext]&quot;</span>, <span class="comment">//打包之后的命名格式</span></span><br><span class="line">              <span class="attr">limit</span>: <span class="number">15</span> * <span class="number">1024</span> <span class="comment">//单位：B 小于15KB的会用base64转换，大于15KB的就复制图片到dist目录，用http请求</span></span><br><span class="line">            &#125;</span><br><span class="line">          &#125;</span><br><span class="line">        ]</span><br><span class="line">      &#125;</span><br><span class="line">      </span><br><span class="line">    ]</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h3 id="5-插件-plugin"><a href="#5-插件-plugin" class="headerlink" title="5.插件(plugin)"></a>5.<a target="_blank" rel="noopener" href="https://webpack.docschina.org/concepts/#plugins">插件(plugin)</a></h3><p><strong>loader</strong> 用于转换某些类型的模块，而插件则可以用于执行范围更广的任务。包括：打包优化，资源管理，注入环境变量等等。<strong>plugin</strong>是⽤于扩展webpack的功能，各种各样的<strong>plugin</strong>⼏乎可以让webpack做任何与构建相关关的事情。<strong>plugin</strong>的配置很简单，<strong>plugins</strong>配置项接收⼀个数组，数组⾥的每⼀项都是⼀个要使⽤的<strong>plugin</strong>的实例，<strong>plugin</strong>需要的参数通过构造函数传⼊。使⽤<strong>plugin</strong>的难点在于plugin本身的配置项，⽽不是如何在webpack中引⼊plugin，⼏乎所有webpack⽆法直接实现的功能，都能找到开源的plugin去解决，我们要做的就是去找更据⾃⼰的需要找出相应的plugin。</p>
<p>接下来我们就介绍一下常用的插件：</p>
<h5 id="html-webpack-plugin"><a href="#html-webpack-plugin" class="headerlink" title="html-webpack-plugin"></a><a target="_blank" rel="noopener" href="https://webpack.docschina.org/plugins/html-webpack-plugin/">html-webpack-plugin</a></h5><p>该插件能把我们⾃已写的.html⽂件复制到指定打包出⼝⽬录下，并引⼊相关的资源代码。为html⽂件中引⼊的外部资源如script、link动态添加每次compile后的hash，防⽌引⽤缓存的外部⽂件问题。可以⽣成创建html⼊⼝⽂件。</p>
<p>我们先安装它：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i html-webpack-plugin -D</span><br></pre></td></tr></table></figure>



<p>之后，在<code>webpack.config.js</code>中引入配置：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//引入nodejs中的核心模块</span></span><br><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">&#x27;path&#x27;</span>)</span><br><span class="line"><span class="keyword">const</span> <span class="title class_">HtmlWebpackPlugin</span> = <span class="built_in">require</span>(<span class="string">&#x27;html-webpack-plugin&#x27;</span>)  &lt;---------引入的插件</span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">  <span class="attr">mode</span>: <span class="string">&#x27;development&#x27;</span>,</span><br><span class="line">  <span class="attr">entry</span>: <span class="string">&#x27;./src/js/main.js&#x27;</span>,</span><br><span class="line">  <span class="attr">output</span>: &#123;</span><br><span class="line">    <span class="attr">path</span>: path.<span class="title function_">join</span>(__dirname, <span class="string">&#x27;/build&#x27;</span>), <span class="comment">// 决定出口文件在哪里</span></span><br><span class="line">    <span class="attr">filename</span>: <span class="string">&#x27;bundle.js&#x27;</span> <span class="comment">// 设置出口文件的名字。默认情况下，它叫main.js</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">module</span>: &#123; <span class="comment">// 处理非js模块</span></span><br><span class="line">    <span class="attr">rules</span>: [ <span class="comment">// 规则</span></span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">test</span>: <span class="regexp">/\.css$/</span>, <span class="comment">// 正则测试</span></span><br><span class="line">        <span class="attr">use</span>: [<span class="string">&#x27;style-loader&#x27;</span>, <span class="string">&#x27;css-loader&#x27;</span>] <span class="comment">// loader</span></span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">test</span>: <span class="regexp">/\.less$/</span>, <span class="comment">// 正则测试</span></span><br><span class="line">        <span class="attr">use</span>: [<span class="string">&#x27;style-loader&#x27;</span>, <span class="string">&#x27;css-loader&#x27;</span>, <span class="string">&#x27;less-loader&#x27;</span>] <span class="comment">// loader</span></span><br><span class="line">      &#125;</span><br><span class="line">    ]</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">plugins</span>: [</span><br><span class="line">    <span class="keyword">new</span> <span class="title class_">HtmlWebpackPlugin</span>()</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p>配置好后，我们可以在输出目录中看到index文件啦。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">build</span><br><span class="line">├── 8ee1b44315556d16ca2b.jpg</span><br><span class="line">├── bundle.js</span><br><span class="line">└── index.html       &lt;----------</span><br></pre></td></tr></table></figure>

<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;utf-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Webpack App<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">script</span> <span class="attr">defer</span> <span class="attr">src</span>=<span class="string">&quot;bundle.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>到这里大家也发现了，在title位置它自己默认为<code>Webpack App</code>，假如我们有自己想要的名字，能够配置嘛？答案是可以的。我们可以这样修改配置文件：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">plugins</span>: [</span><br><span class="line">   <span class="keyword">new</span> <span class="title class_">HtmlWebpackPlugin</span>(&#123;</span><br><span class="line">     <span class="attr">title</span>: <span class="string">&#x27;My App&#x27;</span>, </span><br><span class="line">     <span class="attr">template</span>: <span class="string">&#x27;index.html&#x27;</span>,  <span class="comment">// 以当前目录下的index.html  作为模板</span></span><br><span class="line">     <span class="attr">filename</span>: <span class="string">&#x27;admin.html&#x27;</span>  <span class="comment">// 在  output.path 目录下生成 admin.html 文件</span></span><br><span class="line">   &#125;)</span><br><span class="line"> ]</span><br></pre></td></tr></table></figure>



<p>当然，该插件的功能不仅仅只有这些，具体情况可以<a target="_blank" rel="noopener" href="https://github.com/jantimon/html-webpack-plugin#options">点击这里</a>查看GitHub官方文档或者自行搜索对应的插件教程。</p>
<h5 id="clean-webpack-plugin"><a href="#clean-webpack-plugin" class="headerlink" title="clean-webpack-plugin"></a><a target="_blank" rel="noopener" href="https://www.npmjs.com/package/clean-webpack-plugin">clean-webpack-plugin</a></h5><p>clean-webpack-plugin是一个清除文件的插件。在每次打包后，磁盘空间会存有打包后的资源，在再次打包的时候，我们需要先把本地已有的打包后的资源清空，来减少它们对磁盘空间的占用。插件clean-webpack-plugin就可以帮我们做这个事情。</p>
<p>安装先：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i clean-webpack-plugin -D</span><br></pre></td></tr></table></figure>



<p>配置一下webpack.config.js</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">&#x27;path&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span>  &#123; <span class="title class_">CleanWebpackPlugin</span> &#125; = <span class="built_in">require</span>(<span class="string">&#x27;clean-webpack-plugin&#x27;</span>);</span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">  ...</span><br><span class="line">  ...</span><br><span class="line">  ...</span><br><span class="line">  <span class="attr">plugins</span>:[</span><br><span class="line">    <span class="keyword">new</span> <span class="title class_">CleanWebpackPlugin</span>()    &lt;------  直接引入进来</span><br><span class="line">  ]</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>



<p>我们可以在打包目录下新建一些不需要的文件：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">build</span><br><span class="line">├── 8ee1b44315556d16ca2b.jpg</span><br><span class="line">├── a.txt            &lt;----- </span><br><span class="line">├── admin.html</span><br><span class="line">├── b.txt            &lt;----- </span><br><span class="line">├── bundle.js</span><br><span class="line">└── index.html      &lt;----- </span><br></pre></td></tr></table></figure>



<p>然后运行打包命令看看。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">build</span><br><span class="line">├── 8ee1b44315556d16ca2b.jpg</span><br><span class="line">├── admin.html</span><br><span class="line">└── bundle.js</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>不要的文件已经清空了。</p>
<h3 id="6-实时预览"><a href="#6-实时预览" class="headerlink" title="6.实时预览"></a>6.实时预览</h3><p>我们使用<code>vue-cli</code>脚手架的时候，当我们更新一下代码，脚手架会自动帮我们重新渲染，这个是因为脚手架自动帮我们重新发布并且更新。当然，核心离不开<code>webpack-dev-server</code>。</p>
<p>我们来安装一下它：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i webpack-dev-server -D</span><br></pre></td></tr></table></figure>



<p>接下来，在配置文件中添加如下信息配置：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">  <span class="comment">// 其他省略....</span></span><br><span class="line">  <span class="comment">// 配置 webpack-dev-server的选项</span></span><br><span class="line">  <span class="attr">devServer</span>: &#123;</span><br><span class="line">    <span class="attr">host</span>: <span class="string">&#x27;127.0.0.1&#x27;</span>,  <span class="comment">// 配置启动ip地址</span></span><br><span class="line">    <span class="attr">port</span>: <span class="number">10088</span>,  <span class="comment">// 配置端⼝</span></span><br><span class="line">    <span class="attr">open</span>: <span class="literal">true</span>  <span class="comment">// 配置是否⾃动打开浏览器</span></span><br><span class="line"> &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<p>此外，我们配置一个专属脚本，用来启动该功能。找到<code>packge.json</code>文件，加入脚本：</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;webpack_study&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;version&quot;</span><span class="punctuation">:</span> <span class="string">&quot;1.0.0&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;description&quot;</span><span class="punctuation">:</span> <span class="string">&quot;&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;main&quot;</span><span class="punctuation">:</span> <span class="string">&quot;index.js&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;scripts&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;test&quot;</span><span class="punctuation">:</span> <span class="string">&quot;echo \&quot;Error: no test specified\&quot; &amp;&amp; exit 1&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;bulid&quot;</span><span class="punctuation">:</span> <span class="string">&quot;webpack&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;serve&quot;</span><span class="punctuation">:</span> <span class="string">&quot;webpack-dev-server&quot;</span>      &lt;----------</span><br><span class="line">  <span class="punctuation">&#125;</span></span><br><span class="line">  ...</span><br><span class="line">  ...</span><br><span class="line"><span class="punctuation">&#125;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>



<p>启动一下康康👀。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm run serve</span><br></pre></td></tr></table></figure>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者: </span><span class="post-copyright-info"><a href="https://blog.chuyuxuan.top">chuyuxuan</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章链接: </span><span class="post-copyright-info"><a href="https://blog.chuyuxuan.top/2022/10/09/%E5%B0%9D%E8%AF%95%E9%85%8D%E7%BD%AE%E4%B8%80%E4%B8%8B%E7%AE%80%E5%8D%95%E7%9A%84webpack/">https://blog.chuyuxuan.top/2022/10/09/尝试配置一下简单的webpack/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="https://blog.chuyuxuan.top" target="_blank">CHUYUXUAN</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/webpack/">webpack</a></div><div class="post_share"><div class="social-share" data-image="https://s2.loli.net/2022/10/09/rvQuakSAYZ2b9Wg.png" data-sites="wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/2022/11/01/win%E8%AE%BE%E7%BD%AE%E5%90%8C%E6%97%B6%E9%93%BE%E6%8E%A5%E5%86%85%E5%A4%96%E7%BD%91/" title="win设置同时链接内外网"><img class="cover" src="https://s2.loli.net/2022/11/01/XurvGZ2QkBUIWmY.png" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">win设置同时链接内外网</div></div></a></div><div class="next-post pull-right"><a href="/2022/01/23/ReactHook%E4%B9%8BuseState/" title="ReactHook之useState"><div class="cover" style="background: var(--default-bg-color)"></div><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">ReactHook之useState</div></div></a></div></nav><hr class="custom-hr"/><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="fas fa-comments fa-fw"></i><span> 评论</span></div></div><div class="comment-wrap"><div><div class="vcomment" id="vcomment"></div></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src="/img/avatar1.jpg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__name">chuyuxuan</div><div class="author-info__description"></div></div><div class="card-info-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">60</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">72</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">0</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/Chuyuxuan0v0"><i class="fab fa-github"></i><span>Follow Me</span></a></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%87%86%E5%A4%87"><span class="toc-number">1.</span> <span class="toc-text">准备</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%9D%E5%A7%8B%E5%8C%96%E4%B8%80%E4%B8%AA%E9%A1%B9%E7%9B%AE"><span class="toc-number">2.</span> <span class="toc-text">初始化一个项目</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%80%9D%E8%80%83%E9%97%AE%E9%A2%98"><span class="toc-number">3.</span> <span class="toc-text">思考问题</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%89%E8%A3%85webpack"><span class="toc-number">4.</span> <span class="toc-text">安装webpack</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%A8%A1%E5%9D%97%E5%8C%96%E4%BB%A3%E7%A0%81"><span class="toc-number">5.</span> <span class="toc-text">模块化代码</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AF%B9index-js%E6%89%93%E5%8C%85"><span class="toc-number">6.</span> <span class="toc-text">对index.js打包</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#webpack%E6%A6%82%E5%BF%B5"><span class="toc-number">7.</span> <span class="toc-text">webpack概念</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E6%A8%A1%E5%BC%8F-mode"><span class="toc-number">8.</span> <span class="toc-text">1.模式(mode)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E5%85%A5%E5%8F%A3-entry"><span class="toc-number">9.</span> <span class="toc-text">2.入口(entry)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-%E8%BE%93%E5%87%BA-output"><span class="toc-number">10.</span> <span class="toc-text">3.输出(output)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-loader"><span class="toc-number">11.</span> <span class="toc-text">4.loader</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#css-loader"><span class="toc-number">11.0.1.</span> <span class="toc-text">css-loader</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#style-loader"><span class="toc-number">11.0.2.</span> <span class="toc-text">style-loader</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#Less-loader"><span class="toc-number">11.0.3.</span> <span class="toc-text">Less-loader</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#url-loader%EF%BC%88%E5%8F%AF%E8%B7%B3%E8%BF%87%EF%BC%89"><span class="toc-number">11.0.4.</span> <span class="toc-text">url-loader（可跳过）</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-%E6%8F%92%E4%BB%B6-plugin"><span class="toc-number">12.</span> <span class="toc-text">5.插件(plugin)</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#html-webpack-plugin"><span class="toc-number">12.0.1.</span> <span class="toc-text">html-webpack-plugin</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#clean-webpack-plugin"><span class="toc-number">12.0.2.</span> <span class="toc-text">clean-webpack-plugin</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-%E5%AE%9E%E6%97%B6%E9%A2%84%E8%A7%88"><span class="toc-number">13.</span> <span class="toc-text">6.实时预览</span></a></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/2024/04/30/JS%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F-%E4%BB%A3%E7%90%86%E6%A8%A1%E5%BC%8F/" title="JS设计模式-代理模式"><img src="https://s2.loli.net/2024/04/14/ZxojA43sn1HWCiB.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="JS设计模式-代理模式"/></a><div class="content"><a class="title" href="/2024/04/30/JS%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F-%E4%BB%A3%E7%90%86%E6%A8%A1%E5%BC%8F/" title="JS设计模式-代理模式">JS设计模式-代理模式</a><time datetime="2024-04-29T16:52:06.000Z" title="发表于 2024-04-30 00:52:06">2024-04-30</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2024/04/14/JS%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F-%E7%AD%96%E7%95%A5%E6%A8%A1%E5%BC%8F/" title="JS设计模式-策略模式"><img src="https://s2.loli.net/2024/04/14/PI3fcUwVQhiStEK.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="JS设计模式-策略模式"/></a><div class="content"><a class="title" href="/2024/04/14/JS%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F-%E7%AD%96%E7%95%A5%E6%A8%A1%E5%BC%8F/" title="JS设计模式-策略模式">JS设计模式-策略模式</a><time datetime="2024-04-14T09:02:24.000Z" title="发表于 2024-04-14 17:02:24">2024-04-14</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2024/04/12/JS%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F-%E5%8D%95%E5%88%97%E6%A8%A1%E5%BC%8F/" title="JS设计模式-单列模式"><img src="https://s2.loli.net/2024/04/14/PRamo5sxw9ithZK.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="JS设计模式-单列模式"/></a><div class="content"><a class="title" href="/2024/04/12/JS%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F-%E5%8D%95%E5%88%97%E6%A8%A1%E5%BC%8F/" title="JS设计模式-单列模式">JS设计模式-单列模式</a><time datetime="2024-04-12T06:39:37.000Z" title="发表于 2024-04-12 14:39:37">2024-04-12</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2024/04/03/JS%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F-%E5%8F%91%E5%B8%83%E8%AE%A2%E9%98%85%E8%80%85%E6%A8%A1%E5%BC%8F/" title="JS设计模式-发布订阅者模式"><img src="https://s2.loli.net/2024/04/06/WXv36wo2Cy5tEqK.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="JS设计模式-发布订阅者模式"/></a><div class="content"><a class="title" href="/2024/04/03/JS%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F-%E5%8F%91%E5%B8%83%E8%AE%A2%E9%98%85%E8%80%85%E6%A8%A1%E5%BC%8F/" title="JS设计模式-发布订阅者模式">JS设计模式-发布订阅者模式</a><time datetime="2024-04-03T14:53:04.000Z" title="发表于 2024-04-03 22:53:04">2024-04-03</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2024/03/26/Javascript%E6%93%8D%E4%BD%9C%E7%AC%A6%E8%BF%90%E7%AE%97%E5%90%88%E9%9B%86/" title="Javascript操作符运算合集"><img src="https://s21.ax1x.com/2024/03/26/pF5gcY4.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Javascript操作符运算合集"/></a><div class="content"><a class="title" href="/2024/03/26/Javascript%E6%93%8D%E4%BD%9C%E7%AC%A6%E8%BF%90%E7%AE%97%E5%90%88%E9%9B%86/" title="Javascript操作符运算合集">Javascript操作符运算合集</a><time datetime="2024-03-26T10:40:59.000Z" title="发表于 2024-03-26 18:40:59">2024-03-26</time></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2019 - 2024 By CHUYUXUAN</div><div class="framework-info"><span>Framework </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>Theme </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a><span class="footer-separator">|</span><span>Design By </span><a href="https://blog.chuyuxuan.top">CHUYUXUAN</a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><a id="to_comment" href="#post-comment" title="直达评论"><i class="fas fa-comments"></i></a><button id="go-up" type="button" title="回到顶部"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox/fancybox.umd.min.js"></script><div class="js-pjax"><script>function loadValine () {
  function initValine () {
    const valine = new Valine(Object.assign({
      el: '#vcomment',
      appId: '4VHYBgLfdjw6zhs1Ep46acMw-gzGzoHsz',
      appKey: 't4eW4wzuDJuIU1McV0Ir9Dzq',
      avatar: 'monsterid',
      serverURLs: '',
      emojiMaps: "",
      path: window.location.pathname,
      visitor: true
    }, null))
  }

  if (typeof Valine === 'function') initValine() 
  else getScript('https://cdn.jsdelivr.net/npm/valine/dist/Valine.min.js').then(initValine)
}

if ('Valine' === 'Valine' || !true) {
  if (true) btf.loadComment(document.getElementById('vcomment'),loadValine)
  else setTimeout(loadValine, 0)
} else {
  function loadOtherComment () {
    loadValine()
  }
}</script></div><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div></body></html>